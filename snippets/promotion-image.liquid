{% if block != blank and block.settings.image != blank %}

{{ 'promotion-image.css' | asset_url | stylesheet_tag }}

    <div class="image-container mega-menu-image"
         style="{% if block.settings.position == 'right' %}order:2;{% endif %}">
        <div class="image-wrapper">

            {% if block.settings.image %}
                {% liquid
                    assign image_alt = block.settings.alt_text | default: block.settings.image.alt | default: ''
                    assign image_size = block.settings.image_size | default: 'medium'
                    assign is_above_fold = block.settings.above_fold | default: false

                    case image_size
                        when 'small'
                            assign img_width = 200
                            assign img_sizes = '(max-width: 480px) 150px, 200px'
                        when 'large'
                            assign img_width = 400
                            assign img_sizes = '(max-width: 480px) 200px, (max-width: 768px) 300px, 400px'
                        else
                            assign img_width = 300
                            assign img_sizes = '(max-width: 480px) 200px, 300px'
                    endcase
                %}

                <img
                        src="{{ block.settings.image | image_url: width: img_width, height: img_width }}"
                        alt="{{ image_alt | escape }}"
                        width="{{ img_width }}"
                        height="{{ img_width }}"
                        loading="{% if is_above_fold %}eager{% else %}lazy{% endif %}"
                        decoding="async"
                        class="category-image mega-menu-category-image"
                        srcset="{{ block.settings.image | image_url: width: 150 }} 150w,
                {{ block.settings.image | image_url: width: 200 }} 200w,
                {{ block.settings.image | image_url: width: 300 }} 300w,
                {{ block.settings.image | image_url: width: 400 }} 400w"
                        sizes="{{ img_sizes }}"
                />
            {% endif %}


        </div>

        {% if block.settings.category_title != blank %}
            <div class="category-title mega-menu-title">
                {{ block.settings.category_title }}
            </div>
        {% endif %}
    </div>
{% endif %}
