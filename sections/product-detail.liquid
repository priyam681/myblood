{%- style -%}
    .terrain-tabs-section h2 {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 24px;
    }

    .terrain-buttons {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 20px;
    }

    .terrain-buttons button {
    padding: 16px 18px;
    border: 1px solid rgba(113, 113, 113, 0.62);
    color: rgba(125, 121, 121, 0.81);
    font-weight: 600;
    cursor: pointer;
    font-size: 18px;
    background: #fff;
    }

    .terrain-buttons button.active {
    background-color: #FF3200;
    color: white;
    border-color: #FF3200;
    }

    .terrain-tab-content {
    display: none;
    }

    .terrain-tab-content.active {
    display: block;
    }

    .terrain-tab-content p {
    font-size: 16px;
    color: #374151;
    }

    .product-detail-image {
    aspect-ratio: 1;
    object-fit: content;
    }

    @media (min-width: 1024px) {
    .terrain-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    }
    }
{%- endstyle -%}


<section class="terrain-tabs-section page-width">

    <div class="terrain-layout">
        <!-- Left: Text Content -->
        <div>
            <h2>PRODUCT DETAILS</h2>
            <h3 style="margin-bottom: 10px;">Terrain</h3>

            <!-- Buttons -->
            <div class="terrain-buttons">
                {% if product.metafields.custom.productdetails1.value %}
                    <script>
                        console.log("Product: ", {{ product.metafields.custom.productdetails1.value | json }})
                    </script>
                    {% for entry in product.metafields.custom.productdetails1.value %}

                    {% if entry != blank %}
                    <button {% if forloop.first %}class="active"{% endif %} data-tab="{{ forloop.index }}">
                        {{ entry.category_name | metafield_tag }}
                    </button>

                    {% assign rows = entry.rowdetail | join: ',' %}
                    <!-- Handle metaobjects from rowdetail array -->
                {% for metaobject_id in entry.rowdetail %}
                    {% assign metaobject = metaobject_id | metaobject %}

                    <script>
                      console.log("Metaobject ID:", {{ metaobject_id | json }});
                      console.log("Metaobject full data:", {{ metaobject | json }});
                    </script>


                    <div class="terrain-tab-content {% if forloop.first %}active{% endif %}" id="tab-{{ forloop.parentloop.index }}">
                        {% if metaobject %}
                            <!-- Access metaobject fields here. Replace field_name with your actual field names -->
                            <div class="metaobject-content">
                                {{ metaobject.title.value }}
                                {{ metaobject.description.value }}
                                <!-- Add other fields as needed -->
                            </div>
                        {% endif %}
                    </div>

                    <!-- Debug logging -->
                    <script>
                      console.log("Metaobject ID:", {{ metaobject_id | json }});
                      console.log("Metaobject Data:", {{ metaobject | json }});
                    </script>
                {% endfor %}


                {% endif %}

                    {% endfor %}
                {% endif %}

            </div>




        </div>

        <!-- Right: Image -->
        <div>

            <a href="{{ product.url }}"> <img src="{{ product.images | reverse | first | image_url: width: 600 }}"
                                              alt="{{ product.title }}" class="product-detail-image"></a>

        </div>
    </div>
</section>



{% schema %}
{
  "name": "Product Detail Section",
  "settings": [
    {
      "type": "text",
      "id": "less_title",
      "label": "Less Technical Title",
      "default": "Less Technical"
    },
    {
      "type": "textarea",
      "id": "less_description",
      "label": "Less Technical Description",
      "default": "Smooth, flat terrain"
    },
    {
      "type": "text",
      "id": "moderate_title",
      "label": "Moderately Technical Title",
      "default": "Moderately Technical"
    },
    {
      "type": "textarea",
      "id": "moderate_description",
      "label": "Moderately Technical Description",
      "default": "Rolling hills and light obstacles"
    },
    {
      "type": "text",
      "id": "high_title",
      "label": "High Technical Title",
      "default": "High Technical"
    },
    {
      "type": "textarea",
      "id": "high_description",
      "label": "High Technical Description",
      "default": "Steep, rugged, technical terrain"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Side Image"
    }
  ],
  "presets": [
    {
      "name": "Product Detail Section"
    }
  ]
}
{% endschema %}
