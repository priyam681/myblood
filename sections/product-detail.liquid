{%- style -%}
    .terrain-tabs-section h2 {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 24px;
    }

    .terrain-buttons {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 20px;
    }

    .terrain-buttons button {
    padding: 16px 18px;
    border: 1px solid rgba(113, 113, 113, 0.62);
    color: rgba(125, 121, 121, 0.81);
    font-weight: 600;
    cursor: pointer;
    font-size: 18px;
    background: #fff;
    }

    .terrain-buttons button.active {
    background-color: #FF3200;
    color: white;
    border-color: #FF3200;
    }

    .terrain-tab-content {
    display: none;
    }

    .terrain-tab-content.active {
    display: block;
    }

    .terrain-tab-content p {
    font-size: 16px;
    color: #374151;
    }

    .product-detail-image {
        aspect-ratio: 1;
        object-fit: contain;
        width: 100%;
    }

    @media (min-width: 1024px) {
    .terrain-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    }
    }

    .row {
    display: flex;
    gap: 12px;
    margin-bottom: 12px;
    }

    .row_title {
    font-weight: bold;
    display: flex;
    }
    }

{%- endstyle -%}


<section class="terrain-tabs-section page-width">

    <div class="terrain-layout">
        <!-- Left: Text Content -->
        <div>
            <h2>PRODUCT DETAILS</h2>
            <h3 style="margin-bottom: 10px;">Terrain</h3>

            <!-- Buttons -->
            <div class="terrain-buttons">
                {% if product.metafields.custom.productdetails.value %}
                    <script>
                      console.log('Product: ', {{ product.metafields.custom.productdetails1.value | json }});
                    </script>
                {% for entry in product.metafields.custom.productdetails.value %}

                {% if entry != blank %}
                    <button {% if forloop.first %}class="active"{% endif %} data-tab="{{ forloop.index }}">
                        {{ entry.category_name | metafield_tag }}
                    </button>

                    {% assign rows = shop.metaobjects.row.values %}

                    <div class="terrain-tab-content active"
                         id="tab-{{ forloop.index }}">

                        {% for row in rows %}
                            {% if row.target == entry.parentid %}
                                {% assign reference_id = row.syem.id %}
                                <script defer>
                                  console.log('Reference: ', {{ reference_id }});
                                </script>
                                <div class="row">
                                    <div class="row_title">
                                        {{ row.title | metafield_tag }}
                                    </div>
                                    <div class="row_content">
                                        {{ row.content | metafield_tag }}
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}

                    </div>
                {% endif %}

                {% endfor %}
                {% endif %}

            </div>


        </div>

        <!-- Right: Image -->
        <div>

            <a href="{{ product.url }}"> <img src="{{ product.images | reverse | first | image_url: width: 600 }}"
                                              alt="{{ product.title }}" class="product-detail-image"></a>

        </div>
    </div>
</section>


{% schema %}
{
  "name": "Product Detail Section",
  "settings": [
    {
      "type": "text",
      "id": "less_title",
      "label": "Less Technical Title",
      "default": "Less Technical"
    },
    {
      "type": "textarea",
      "id": "less_description",
      "label": "Less Technical Description",
      "default": "Smooth, flat terrain"
    },
    {
      "type": "text",
      "id": "moderate_title",
      "label": "Moderately Technical Title",
      "default": "Moderately Technical"
    },
    {
      "type": "textarea",
      "id": "moderate_description",
      "label": "Moderately Technical Description",
      "default": "Rolling hills and light obstacles"
    },
    {
      "type": "text",
      "id": "high_title",
      "label": "High Technical Title",
      "default": "High Technical"
    },
    {
      "type": "textarea",
      "id": "high_description",
      "label": "High Technical Description",
      "default": "Steep, rugged, technical terrain"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Side Image"
    }
  ],
  "presets": [
    {
      "name": "Product Detail Section"
    }
  ]
}
{% endschema %}
